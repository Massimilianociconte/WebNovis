const isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0;let isMobile=window.innerWidth<=768;window.addEventListener("resize",()=>{isMobile=window.innerWidth<=768});const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,revealElements=document.querySelectorAll(".reveal, .reveal-stagger"),revealObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("active")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});revealElements.forEach(e=>revealObserver.observe(e));const nav=document.getElementById("nav"),navToggle=document.getElementById("navToggle"),navMenu=document.getElementById("navMenu");let scrollPosition=0;function openMobileMenu(){}function closeMobileMenu(){}const navLinks=document.querySelectorAll(".nav-link");if(navMenu&&navToggle){const e=document.createElement("button");e.className="nav-menu-close",e.innerHTML="✕",e.setAttribute("aria-label","Chiudi menu"),navMenu.insertBefore(e,navMenu.firstChild),openMobileMenu=function(){scrollPosition=window.pageYOffset,document.body.classList.add("menu-open"),document.body.classList.remove("menu-closing"),navMenu.classList.add("active"),navToggle.classList.add("active"),navToggle.setAttribute("aria-expanded","true"),document.body.style.top=`-${scrollPosition}px`},closeMobileMenu=function(){navMenu.classList.remove("active"),navToggle.classList.remove("active"),navToggle.setAttribute("aria-expanded","false"),document.documentElement.style.scrollBehavior="auto",document.body.style.top="",window.scrollTo(0,scrollPosition),requestAnimationFrame(function(){document.documentElement.style.scrollBehavior=""}),document.body.classList.add("menu-closing"),setTimeout(function(){document.body.classList.remove("menu-open"),requestAnimationFrame(function(){requestAnimationFrame(function(){document.body.classList.remove("menu-closing")})})},500)},navToggle.addEventListener("click",()=>{navMenu.classList.contains("active")?closeMobileMenu():openMobileMenu()}),e.addEventListener("click",closeMobileMenu),navLinks.forEach(e=>{e.addEventListener("click",()=>{closeMobileMenu()})})}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);if(n){closeMobileMenu();const e=80,t=n.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:t,behavior:isMobile?"auto":"smooth"}),isMobile&&setTimeout(()=>{window.scrollTo({top:t,behavior:"auto"})},50)}})});const observerOptions={threshold:.1,rootMargin:"0px 0px -100px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("is-visible")})},observerOptions),animatedElements=document.querySelectorAll(".triade-card, .service-section, .cta-section");animatedElements.forEach(e=>{observer.observe(e)});const gradientOrbs=document.querySelectorAll(".gradient-orb"),allSections=document.querySelectorAll("section"),isHomepage=!document.querySelector(".portfolio-hero");!function(){var e=!1;function t(){var t=window.pageYOffset,n=document.documentElement.scrollHeight-document.documentElement.clientHeight;if(nav){var o=t>100;o&&!nav.classList.contains("scrolled")?nav.classList.add("scrolled"):!o&&nav.classList.contains("scrolled")&&nav.classList.remove("scrolled")}if(!isMobile)for(var s=0;s<gradientOrbs.length;s++)gradientOrbs[s].style.transform="translateY("+t*(.5+.2*s)+"px)";if(isHomepage){for(var r="",a=0;a<allSections.length;a++){var i=allSections[a].getBoundingClientRect();if(i.top<=window.innerHeight/2&&i.bottom>=window.innerHeight/2){var c=allSections[a].className;-1!==c.indexOf("hero")?r="var(--dark)":-1!==c.indexOf("triade")&&(r="linear-gradient(180deg, var(--dark) 0%, var(--dark-light) 100%)")}}r&&(document.body.style.background=r)}var l=document.getElementById("backToTop");if(l){var d=t>500;d&&!l.classList.contains("visible")?l.classList.add("visible"):!d&&l.classList.contains("visible")&&l.classList.remove("visible")}var u=document.querySelector(".scroll-progress");u&&n>0&&(u.style.transform="scaleX("+t/n+")");var m=document.getElementById("whatsappFloat");m&&(t>300?(m.style.opacity="1",m.style.transform="translateY(0)"):(m.style.opacity="0",m.style.transform="translateY(20px)")),highlightNav(),e=!1}window.addEventListener("scroll",function(){e||(requestAnimationFrame(t),e=!0)},{passive:!0})}();const triadeCards=document.querySelectorAll(".triade-card");triadeCards.forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})});const sections=document.querySelectorAll("section[id]");var sectionCache=[],sectionCacheDirty=!0;function buildSectionCache(){sectionCache=[],sections.forEach(function(e){sectionCache.push({id:e.getAttribute("id"),top:e.offsetTop-100,bottom:e.offsetTop-100+e.offsetHeight})}),sectionCacheDirty=!1}window.addEventListener("resize",function(){sectionCacheDirty=!0}),window.addEventListener("load",function(){sectionCacheDirty=!0});const highlightNav=()=>{sectionCacheDirty&&buildSectionCache();const e=window.pageYOffset;let t="";for(var n=0;n<sectionCache.length;n++)e>sectionCache[n].top&&e<=sectionCache[n].bottom&&(t=sectionCache[n].id);t&&navLinks.forEach(e=>{e.getAttribute("href")==="#"+t?e.classList.contains("active")||e.classList.add("active"):e.classList.contains("active")&&e.classList.remove("active")})};function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}window.addEventListener("load",()=>{document.body.classList.add("page-loaded")});const canvas=document.getElementById("particlesCanvas");if(canvas&&!prefersReducedMotion){const t=canvas.getContext("2d"),n=isMobile?30:100,o=isMobile?60:100;let s=!0;function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}new IntersectionObserver(e=>{s=e[0].isIntersecting},{threshold:0}).observe(canvas),resizeCanvas(),window.addEventListener("resize",resizeCanvas);class r{constructor(){this.x=Math.random()*canvas.width,this.y=Math.random()*canvas.height,this.size=2*Math.random()+.5,this.speedX=.5*Math.random()-.25,this.speedY=.5*Math.random()-.25,this.opacity=.5*Math.random()+.2}update(){this.x+=this.speedX,this.y+=this.speedY,this.x>canvas.width&&(this.x=0),this.x<0&&(this.x=canvas.width),this.y>canvas.height&&(this.y=0),this.y<0&&(this.y=canvas.height)}draw(){t.fillStyle=`rgba(91, 106, 174, ${this.opacity})`,t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill()}}const a=[];for(let i=0;i<n;i++)a.push(new r);var particleFrameCount=0;function animateParticles(){t.clearRect(0,0,canvas.width,canvas.height);for(var e=0;e<a.length;e++)a[e].update(),a[e].draw();if(++particleFrameCount%2==0&&(!isMobile||window.innerWidth>480)){const e=o*o;for(let n=0;n<a.length;n++)for(let s=n+1;s<a.length;s++){const r=a[n].x-a[s].x,i=a[n].y-a[s].y,c=r*r+i*i;if(c<e){const e=Math.sqrt(c);t.strokeStyle=`rgba(91, 106, 174, ${.2*(1-e/o)})`,t.lineWidth=.5,t.beginPath(),t.moveTo(a[n].x,a[n].y),t.lineTo(a[s].x,a[s].y),t.stroke()}}}s&&requestAnimationFrame(animateParticles)}animateParticles(),new IntersectionObserver(e=>{e[0].isIntersecting&&s&&animateParticles()},{threshold:0}).observe(canvas)}const magneticElements=document.querySelectorAll(".magnetic");magneticElements.forEach(e=>{e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect();e.style.transform=`translate(${.15*(t.clientX-n.left-n.width/2)}px, ${.15*(t.clientY-n.top-n.height/2)}px) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform="translate(0, 0) scale(1)"})});const visualCards=document.querySelectorAll(".floating-3d");visualCards.forEach(isTouchDevice?e=>{e.addEventListener("touchstart",()=>{e.classList.add("touch-active")}),e.addEventListener("touchend",()=>{setTimeout(()=>e.classList.remove("touch-active"),300)})}:e=>{e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect();e.style.transform=`perspective(1000px) rotateX(${(t.clientY-n.top-n.height/2)/15}deg) rotateY(${(n.width/2-(t.clientX-n.left))/15}deg) translateZ(20px)`}),e.addEventListener("mouseleave",()=>{e.style.transform="perspective(1000px) rotateX(0) rotateY(0) translateZ(0)"})}),document.querySelectorAll(".triade-card, .service-section, .stat-item").forEach(e=>{e.classList.add("reveal"),revealObserver.observe(e)}),document.addEventListener("click",e=>{if(!e.target.closest(".btn"))return;const t=document.createElement("div");t.style.cssText=`\n        position: fixed;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: radial-gradient(circle, rgba(91, 106, 174, 0.6) 0%, rgba(58, 71, 133, 0.3) 50%, transparent 70%);\n        pointer-events: none;\n        z-index: 9999;\n        left: ${e.clientX}px;\n        top: ${e.clientY}px;\n        transform: translate(-50%, -50%) scale(0);\n        animation: rippleEffect 0.6s ease-out forwards;\n    `,document.body.appendChild(t),setTimeout(()=>t.remove(),600)});const style=document.createElement("style");style.textContent="\n    @keyframes rippleEffect {\n        to {\n            transform: translate(-50%, -50%) scale(20);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(style);const codeLines=document.querySelectorAll(".code-line"),codeObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.animation="typing 2s steps(30) forwards, blink 0.75s step-end infinite")})},{threshold:.5});if(codeLines.forEach(e=>{codeObserver.observe(e)}),"IntersectionObserver"in window){const c=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.src=t.dataset.src,t.classList.add("loaded"),c.unobserve(t)}})});document.querySelectorAll("img[data-src]").forEach(e=>{c.observe(e)})}const numberItems=document.querySelectorAll(".number-item"),animateCounter=e=>{const t=parseInt(e.dataset.count),n=e.querySelector(".number-value"),o=t/125;let s=0;const r=()=>{s+=o,s<t?(n.textContent=Math.floor(s),requestAnimationFrame(r)):n.textContent=t};r()},numberObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(animateCounter(e.target),numberObserver.unobserve(e.target))})},{threshold:.5});numberItems.forEach(e=>numberObserver.observe(e));const backToTop=document.getElementById("backToTop");backToTop&&backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const createScrollProgress=()=>{const e=document.createElement("div");e.className="scroll-progress",e.style.transformOrigin="left",e.style.willChange="transform",e.style.transform="scaleX(0)",document.body.appendChild(e)};createScrollProgress();const testimonialCards=document.querySelectorAll(".testimonial-card");let currentTestimonial=0;const rotateTestimonials=()=>{testimonialCards.forEach((e,t)=>{e.style.transform=t===currentTestimonial?"scale(1.05) translateY(-10px)":"scale(1) translateY(0)",e.style.opacity=t===currentTestimonial?"1":"0.7"}),currentTestimonial=(currentTestimonial+1)%testimonialCards.length};if(testimonialCards.length>0){let l;const d=document.querySelector(".testimonials-section");d?new IntersectionObserver(e=>{e[0].isIntersecting?l||(l=setInterval(rotateTestimonials,5e3)):(clearInterval(l),l=null)}).observe(d):setInterval(rotateTestimonials,5e3)}const floatingCardsParallax=document.querySelectorAll(".floating-card"),orbsParallax=document.querySelectorAll(".gradient-orb");!function(){var e=!1,t=document.querySelector(".hero");t&&new IntersectionObserver(function(t){e=t[0].isIntersecting},{threshold:0}).observe(t),document.addEventListener("mousemove",function(t){if(e&&!isMobile){for(var n=t.clientX/window.innerWidth,o=t.clientY/window.innerHeight,s=0;s<floatingCardsParallax.length;s++){var r=10*(s+1);floatingCardsParallax[s].style.transform="translate("+(n-.5)*r+"px,"+(o-.5)*r+"px)"}for(var a=0;a<orbsParallax.length;a++){var i=20*(a+1);orbsParallax[a].style.transform="translate("+(n-.5)*i+"px,"+(o-.5)*i+"px)"}}},{passive:!0})}();const revealSections=document.querySelectorAll(".service-section, .testimonials-section, .tech-stack-section"),sectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.animation="fadeInUp 1s ease forwards")})},{threshold:.2});revealSections.forEach(e=>sectionObserver.observe(e));const socialFeedScroll=document.getElementById("socialFeedScroll");if(socialFeedScroll){const u=window.innerWidth<=768||"ontouchstart"in window;setTimeout(()=>{const e=Array.from(socialFeedScroll.querySelectorAll(".feed-post"));var t=e.map(function(e){return e.offsetHeight}),n=e.map(function(e){return parseInt(getComputedStyle(e).marginBottom)||0});let o=0;for(var s=0;s<e.length;s++)o+=t[s]+n[s];if(!u){e.map(e=>e.cloneNode(!0)).forEach(e=>{socialFeedScroll.appendChild(e)});let t=0,n=!0,s=.5;!function e(){n&&(t+=s,t>=o&&(t=0),socialFeedScroll.scrollTop=t),requestAnimationFrame(e)}(),socialFeedScroll.addEventListener("mouseenter",()=>{n=!1}),socialFeedScroll.addEventListener("mouseleave",()=>{n=!0})}},100);const m=document.querySelectorAll(".feed-stats span");m.forEach((e,t)=>{let n=0;const o=setInterval(()=>{if(n++>100)return void clearInterval(o);const t=e.textContent.match(/[\d.]+K?/);if(t){let n=parseFloat(t[0].replace("K",""));t[0].includes("K")?(n+=.1,e.textContent=e.textContent.replace(/[\d.]+K/,n.toFixed(1)+"K")):(n+=Math.floor(3*Math.random())+1,e.textContent=e.textContent.replace(/\d+/,n))}},3e3+1e3*t)}),m.forEach(e=>{e.addEventListener("click",()=>{e.style.transform="scale(1.1)",setTimeout(()=>{e.style.transform="scale(1)"},200)})})}const techItems=document.querySelectorAll(".tech-item");async function subscribeToNewsletter(e,t,n){try{const o=await fetch("/api/newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.trim().toLowerCase(),name:t||"",source:n||"website"})}),s=await o.json();return{success:s.success||!1,duplicate:s.duplicate||!1}}catch(e){return{success:!1}}}techItems.forEach(e=>{e.addEventListener("mouseenter",function(){const e=this.querySelector(".tech-icon");e.style.transform="scale(1.3) rotate(360deg)",e.style.transition="transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)"}),e.addEventListener("mouseleave",function(){this.querySelector(".tech-icon").style.transform="scale(1) rotate(0deg)"})});const contactForm=document.querySelector(".contact-form");if(contactForm){const p=contactForm.querySelector('input[name="email"]'),v=contactForm.querySelector('input[name="replyto"]');p&&v&&p.addEventListener("input",()=>{v.value=p.value});const f=contactForm.querySelectorAll(".form-group input, .form-group textarea, .form-group select"),h=contactForm.querySelectorAll(".form-group [required]"),g=contactForm.querySelector('button[type="submit"]'),y=contactForm.querySelector("#termsCheckbox"),b=contactForm.querySelector("#termsCheckboxLabel"),w=contactForm.querySelector("#termsErrorMessage"),E=(e,t,n=!0)=>{const o=e.closest(".form-group");o&&(t?o.classList.remove("is-invalid"):n&&o.classList.add("is-invalid"))},L=(e,t=!0)=>{const n=e.value.trim(),o="email"===e.type?""!==n&&e.checkValidity():""!==n;return E(e,o,t),o},S=(e,t=!0)=>{b&&(e?(b.classList.remove("error"),w&&w.classList.remove("visible")):t&&(b.classList.add("error"),w&&w.classList.add("visible")))},k=(e=!0)=>{if(!y)return!0;const t=y.checked;return S(t,e),t},q=(e=!0)=>{let t=!0;return h.forEach(n=>{L(n,e)||(t=!1)}),k(e)||(t=!1),t},C=()=>{g&&(g.disabled=!q(!1))},T=()=>{contactForm.querySelectorAll(".form-group.is-invalid").forEach(e=>{e.classList.remove("is-invalid")}),S(!0,!1)};f.forEach(e=>{e.addEventListener("focus",function(){this.parentElement.style.transform="scale(1.02)",this.parentElement.style.transition="transform 0.3s ease"}),e.addEventListener("blur",function(){this.parentElement.style.transform="scale(1)",this.hasAttribute("required")&&L(this,!0),C()}),e.addEventListener("SELECT"===e.tagName?"change":"input",function(){if(this.hasAttribute("required")){const e=this.closest(".form-group"),t=!(!e||!e.classList.contains("is-invalid"));L(this,t)}C()})}),y&&y.addEventListener("change",function(){k(!0),C()}),C(),contactForm.addEventListener("submit",async e=>{if(e.preventDefault(),!q(!0)){const e=contactForm.querySelector(".form-group.is-invalid input, .form-group.is-invalid textarea, .form-group.is-invalid select");return e?e.focus():b&&b.scrollIntoView({behavior:"smooth",block:"center"}),void C()}const t=contactForm.querySelector('button[type="submit"]'),n=contactForm.querySelector("#formResult"),o=t.innerHTML;t.disabled=!0,t.innerHTML="<span>Invio in corso...</span>";try{const e=new FormData(contactForm),s=contactForm.querySelector('input[name="email"]');s&&s.value&&e.set("replyto",s.value);const r=document.getElementById("goalInput"),a=document.getElementById("budgetInput");r&&r.value&&(e.set("obiettivo",r.value),e.set("subject","Nuovo messaggio — "+r.value)),a&&a.value&&e.set("budget",a.value);const i=await fetch("https://api.web3forms.com/submit",{method:"POST",body:e}),c=await i.json();if(!c.success)throw new Error(c.message||"Errore nell'invio");{trackMetaEvent("Lead",{content_name:"Contact Form"});const e=document.getElementById("newsletterCheckbox");if(e&&e.checked){const e=contactForm.querySelector('input[name="email"]'),t=contactForm.querySelector('input[name="name"]');subscribeToNewsletter(e?e.value:"",t?t.value:"","contact-form")}t.innerHTML="<span>✓ Messaggio Inviato!</span>",t.style.background="linear-gradient(135deg, #14b8a6, #10b981)",n&&(n.style.display="block",n.style.background="rgba(20, 184, 166, 0.1)",n.style.color="#14b8a6",n.textContent=e&&e.checked?"Grazie! Ti risponderemo al più presto. Iscrizione alla newsletter confermata!":"Grazie! Ti risponderemo al più presto."),contactForm.reset(),T(),setTimeout(()=>{t.innerHTML=o,t.style.background="",n&&(n.style.display="none"),C()},4e3)}}catch(e){t.innerHTML=o,C(),n&&(n.style.display="block",n.style.background="rgba(239, 68, 68, 0.1)",n.style.color="#ef4444",n.textContent="Errore nell'invio. Riprova o scrivici a hello@webnovis.com",setTimeout(()=>{n.style.display="none"},5e3))}})}const createTypingEffect=(e,t,n=100)=>{let o=0;e.textContent="";const s=()=>{o<t.length&&(e.textContent+=t.charAt(o),o++,setTimeout(s,n))};s()},buttons=document.querySelectorAll(".btn");buttons.forEach(e=>{e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect();e.style.transform=`translate(${.2*(t.clientX-n.left-n.width/2)}px, ${.2*(t.clientY-n.top-n.height/2)}px)`}),e.addEventListener("mouseleave",()=>{e.style.transform="translate(0, 0)"})});const staggerElements=document.querySelectorAll(".service-features li"),staggerObserver=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&setTimeout(()=>{e.target.style.opacity="1",e.target.style.transform="translateX(0)"},100*t)})},{threshold:.5});staggerElements.forEach(e=>{e.style.opacity="0",e.style.transform="translateX(-30px)",e.style.transition="all 0.6s cubic-bezier(0.23, 1, 0.32, 1)",staggerObserver.observe(e)}),function(){const e='import React from \'react\';\nimport { Performance, SEO } from \'@webnovis/core\';\n\nfunction WebNovis() {\n  return (\n    <div className="website">\n      <Performance level="ultra" />\n      <SEO optimized={true} />\n      <header className="hero">\n        <h1>Il Tuo Brand</h1>\n      </header>\n    </div>\n  );\n}';let t=0,n=1,o=!1;const s=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&!o&&(setTimeout(()=>{(()=>{const s=document.getElementById("codeContent"),r=s?.querySelector(".code-typing-area"),a=s?.querySelector(".code-cursor");if(!r||o)return;o=!0;const i=()=>{if(t<304){const o=e[t],a=r.innerHTML;if("\n"===o)r.innerHTML=a+"\n",n++;else{const n=((e,t)=>{const n=t.split(/[\s\n(){}<>[\];,.]/).pop()+e;return["import","from","function","return","const","let","var","export","default","className","key"].some(e=>n.includes(e))?`<span style="color: #ec4899">${e}</span>`:["React","Performance","SEO","Design","ServiceCard"].some(e=>n.includes(e))?`<span style="color: #14b8a6">${e}</span>`:["true","false","null","undefined"].some(e=>n.includes(e))?`<span style="color: #f59e0b">${e}</span>`:'"'===e||"'"===e||"`"===e?`<span style="color: #10b981">${e}</span>`:"{"===e||"}"===e||"("===e||")"===e||"["===e||"]"===e?`<span style="color: #818cf8">${e}</span>`:"/"===e&&"/"===t.slice(-1)?`<span style="color: #64748b">${e}</span>`:e})(o,e.substring(0,t));r.innerHTML=a+n}t++;const c="\n"===o?100:50*Math.random()+30;s&&(s.scrollTop=s.scrollHeight),setTimeout(i,c)}else setTimeout(()=>{a&&(a.style.display="none")},1e3),setTimeout(()=>{t=0,n=1,r.innerHTML="",a&&(a.style.display="inline-block"),o=!1,setTimeout(()=>i(),100)},2e3)};i()})()},500),s.unobserve(r.target))})},{threshold:.3}),r=document.getElementById("codeContent");r&&s.observe(r)}();let lastFrameTime=performance.now(),currentFps=60;const monitorPerformance=()=>{const e=performance.now();currentFps=Math.round(1e3/(e-lastFrameTime)),lastFrameTime=e,requestAnimationFrame(monitorPerformance)};"serviceWorker"in navigator&&window.addEventListener("load",()=>{});const GA_MEASUREMENT_ID="G-BPMBY6RTKP",hasAnalyticsConsent=()=>{try{return"accepted"===localStorage.getItem("cookie_consent")}catch(e){return!1}},enableAnalyticsTracking=()=>{if(window["ga-disable-G-BPMBY6RTKP"]=!1,"function"==typeof window.gtag){if(window.gtag("consent","update",{analytics_storage:"granted",ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"}),!window.__gaConfigured){var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-BPMBY6RTKP",document.head.appendChild(e),window.gtag("js",new Date),window.gtag("config","G-BPMBY6RTKP",{anonymize_ip:!0}),window.__gaConfigured=!0}window.__pendingAiReferral&&(window.gtag("event","ai_referral",{event_category:"AI Traffic",event_label:window.__pendingAiReferral,non_interaction:!1}),window.__pendingAiReferral=null)}var t,n,o,s,r,a;"function"!=typeof window.clarity&&(t=window,n=document,s="script",t[o="clarity"]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},(r=n.createElement(s)).async=1,r.src="https://www.clarity.ms/tag/vjbr983er7",(a=n.getElementsByTagName(s)[0]).parentNode.insertBefore(r,a)),"function"==typeof window.clarity&&window.clarity("consent"),"function"!=typeof window.fbq&&(function(e,t,n,o,s,r,a){e.fbq||(s=e.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},e._fbq||(e._fbq=s),s.push=s,s.loaded=!0,s.version="2.0",s.queue=[],(r=t.createElement(n)).async=!0,r.src="https://connect.facebook.net/en_US/fbevents.js",(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(r,a))}(window,document,"script"),window.fbq("init","1405109048327436")),"function"==typeof window.fbq&&(window.fbq("consent","grant"),window.fbq("track","PageView"))},disableAnalyticsTracking=()=>{window["ga-disable-G-BPMBY6RTKP"]=!0,"function"==typeof window.gtag&&window.gtag("consent","update",{analytics_storage:"denied",ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"}),"function"==typeof window.clarity&&window.clarity("consent",!1),"function"==typeof window.fbq&&window.fbq("consent","revoke")},trackEvent=(e,t,n)=>{hasAnalyticsConsent()&&"function"==typeof window.gtag&&window.gtag("event",t,{event_category:e,event_label:n})},trackMetaEvent=(e,t)=>{hasAnalyticsConsent()&&"function"==typeof window.fbq&&(t?window.fbq("track",e,t):window.fbq("track",e))};buttons.forEach(e=>{e.addEventListener("click",()=>{trackEvent("Button","Click",e.textContent.trim())})});const trackSectionView=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&trackEvent("Section","View",e.target.id||e.target.className)})},{threshold:.5});sections.forEach(e=>trackSectionView.observe(e));const rotatingWords=document.querySelectorAll(".hero-rotating-word");if(rotatingWords.length>0){let x=0;const M=rotatingWords[0].closest(".hero-rotating-wrapper"),I=e=>{if(!M)return;const t=e.scrollWidth||e.offsetWidth;t>0&&(M.style.width=t+12+"px")};I(rotatingWords[x]),setInterval(()=>{const e=rotatingWords[x];e.classList.remove("active"),e.classList.add("exit-up"),setTimeout(()=>{e.classList.remove("exit-up")},500),x=(x+1)%rotatingWords.length;const t=rotatingWords[x];t.classList.add("active"),I(t)},2500)}const counterValues=document.querySelectorAll(".counter-value"),animateCounterNC=e=>{const t=parseInt(e.dataset.target),n=performance.now(),o=s=>{const r=Math.min((s-n)/2e3,1),a=1-Math.pow(1-r,3),i=Math.floor(a*t);e.textContent=i,r<1?requestAnimationFrame(o):e.textContent=t};requestAnimationFrame(o)},counterObserverNC=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelector(".counter-value");t&&animateCounterNC(t),counterObserverNC.unobserve(e.target)}})},{threshold:.5});document.querySelectorAll(".counter-item").forEach(e=>{counterObserverNC.observe(e)});const processSteps=document.querySelectorAll(".process-step"),processObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.querySelectorAll(".process-step").forEach((e,t)=>{setTimeout(()=>{e.classList.add("revealed")},200*t)}),processObserver.unobserve(e.target))})},{threshold:.2}),processTimeline=document.getElementById("processTimeline");processTimeline&&processObserver.observe(processTimeline);const faqItems=document.querySelectorAll(".faq-item");faqItems.forEach(e=>{const t=e.querySelector(".faq-question");t&&t.addEventListener("click",()=>{const n=e.classList.contains("active");faqItems.forEach(t=>{if(t!==e){t.classList.remove("active");const e=t.querySelector(".faq-question");e&&e.setAttribute("aria-expanded","false")}}),e.classList.toggle("active"),t.setAttribute("aria-expanded",!n)})});const newsletterForm=document.getElementById("newsletterForm");newsletterForm&&newsletterForm.addEventListener("submit",async e=>{e.preventDefault();const t=newsletterForm.querySelector('input[type="email"]'),n=newsletterForm.querySelector("button");if(!t||!t.value)return;const o=n.textContent;n.disabled=!0,n.textContent="Invio...";try{const e=new FormData(newsletterForm),s=await fetch("https://api.web3forms.com/submit",{method:"POST",body:e}),r=await s.json();if(!r.success)throw new Error(r.message||"Errore");subscribeToNewsletter(t.value,"","newsletter-widget"),n.textContent="✓ Iscritto!",n.style.background="linear-gradient(135deg, #14b8a6, #10b981)",t.value="",setTimeout(()=>{n.textContent=o,n.style.background="",n.disabled=!1},3e3)}catch(e){n.textContent="Errore, riprova",n.style.background="linear-gradient(135deg, #ef4444, #dc2626)",setTimeout(()=>{n.textContent=o,n.style.background="",n.disabled=!1},3e3)}});const whatsappFloat=document.getElementById("whatsappFloat");whatsappFloat&&(whatsappFloat.style.opacity="0",whatsappFloat.style.transform="translateY(20px)",whatsappFloat.style.transition="opacity 0.5s ease, transform 0.5s ease");const ncSections=document.querySelectorAll(".process-section, .features-section, .faq-section, .newsletter-section, .counters-section");ncSections.forEach(e=>{e.classList.add("reveal"),revealObserver.observe(e)});const featureCardsNC=document.querySelectorAll(".feature-card-nc");featureCardsNC.forEach(e=>{e.classList.add("reveal"),revealObserver.observe(e)});const cookieBanner=document.getElementById("cookieBanner"),cookieAccept=document.getElementById("cookieAccept"),cookieReject=document.getElementById("cookieReject"),storedCookieConsent=(()=>{try{return localStorage.getItem("cookie_consent")}catch(e){return null}})();if("accepted"===storedCookieConsent?enableAnalyticsTracking():disableAnalyticsTracking(),cookieBanner)if(storedCookieConsent)cookieBanner.style.display="none";else{setTimeout(()=>cookieBanner.classList.add("visible"),800);const A=e=>{try{localStorage.setItem("cookie_consent",e)}catch(e){}"accepted"===e?enableAnalyticsTracking():disableAnalyticsTracking(),cookieBanner.classList.remove("visible"),cookieBanner.style.display="none"};cookieAccept?.addEventListener("click",()=>A("accepted")),cookieReject?.addEventListener("click",()=>A("rejected"))}const multistepForm=document.querySelector(".multistep-form");if(multistepForm){const F=multistepForm.querySelectorAll(".ms-step"),B=multistepForm.querySelectorAll(".ms-step-dot"),O=document.getElementById("msProgressFill");let _=1;const P={"Sito Web":[1500,3e3,5e3],"E-Commerce":[4e3,7e3,12e3],"Branding / Logo":[800,1500,3e3],"Social Media":[500,1e3,2e3],"Restyling Sito":[1500,3e3,5e3],Altro:[1e3,3e3,5e3]},H={sprout:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 20h10"/><path d="M10 20c5.5-2.5.8-6.4 3-10"/><path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"/><path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"/></svg>',rocket:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>',zap:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/></svg>',trophy:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>',circleHelp:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>'},N=e=>"€"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),D=e=>500*Math.round(e/500),R=e=>{if(!e||0===e.length)return[{value:"< €1.000",label:"Meno di €1.000",icon:"sprout"},{value:"€1.000 - €3.000",label:"€1.000 — €3.000",icon:"rocket"},{value:"€3.000 - €5.000",label:"€3.000 — €5.000",icon:"zap"},{value:"> €5.000",label:"Oltre €5.000",icon:"trophy"},{value:"Da definire",label:"Da definire",icon:"circleHelp"}];let t=0,n=0,o=0;return e.forEach(e=>{const s=P[e]||P.Altro;t+=s[0],n+=s[1],o+=s[2]}),t=D(t),n=D(n),o=D(o),[{value:"< "+N(t),label:"Meno di "+N(t),icon:"sprout"},{value:N(t)+" - "+N(n),label:N(t)+" — "+N(n),icon:"rocket"},{value:N(n)+" - "+N(o),label:N(n)+" — "+N(o),icon:"zap"},{value:"> "+N(o),label:"Oltre "+N(o),icon:"trophy"},{value:"Da definire",label:"Da definire",icon:"circleHelp"}]},z=(e,t)=>{e.innerHTML=t.map(e=>'<button type="button" class="ms-option" data-value="'+e.value+'">'+H[e.icon]+"<span>"+e.label+"</span></button>").join("")},Y=e=>{F.forEach(e=>e.classList.remove("active")),B.forEach(t=>{const n=parseInt(t.dataset.step);t.classList.remove("active"),n<e?t.classList.add("completed"):t.classList.remove("completed"),n===e&&t.classList.add("active")});const t=multistepForm.querySelector(`.ms-step[data-step="${e}"]`);t&&(t.classList.add("active"),t.style.animation="none",t.style.animation=""),O&&(O.style.width=e/3*100+"%"),_=e,multistepForm.scrollIntoView({behavior:"smooth",block:"nearest"})},j=document.getElementById("goalOptions"),W=document.getElementById("goalInput"),$=document.getElementById("msNext1");j&&j.addEventListener("click",e=>{const t=e.target.closest(".ms-option");if(!t)return;t.classList.toggle("selected");const n=j.querySelectorAll(".ms-option.selected"),o=Array.from(n).map(e=>e.dataset.value);W&&(W.value=o.join(", ")),$&&($.disabled=0===o.length)});const G=document.getElementById("budgetOptions"),X=document.getElementById("budgetInput"),V=document.getElementById("msNext2");G&&G.addEventListener("click",e=>{const t=e.target.closest(".ms-option");t&&(G.querySelectorAll(".ms-option").forEach(e=>e.classList.remove("selected")),t.classList.add("selected"),X&&(X.value=t.dataset.value),V&&(V.disabled=!1))}),multistepForm.addEventListener("click",e=>{const t=e.target.closest(".ms-next"),n=e.target.closest(".ms-prev");if(t&&!t.disabled){if(1===_&&G&&j){const e=j.querySelectorAll(".ms-option.selected"),t=Array.from(e).map(e=>e.dataset.value),n=R(t);z(G,n),X&&(X.value=""),V&&(V.disabled=!0)}Y(_+1)}n&&Y(_-1)})}const processLineGlow=document.getElementById("processLineGlow"),processLineDot=document.getElementById("processLineDot"),processLineSvg=document.getElementById("processLineSvg");if(processLineGlow&&processLineDot&&processLineSvg&&!isMobile){const K=1e3;processLineGlow.style.strokeDasharray=K,processLineGlow.style.strokeDashoffset=K;const U=()=>{const e=processLineSvg.getBoundingClientRect(),t=window.innerHeight,n=e.top-.7*t,o=e.bottom-.3*t-n;if(o<=0)return;let s=-n/o;s=Math.max(0,Math.min(1,s)),processLineGlow.style.strokeDashoffset=K*(1-s),processLineDot.setAttribute("cx",s*K),processLineDot.classList.toggle("visible",s>.02&&s<.98)};window.addEventListener("scroll",function(){requestAnimationFrame(U)},{passive:!0}),U()}!function(){var e=!1;function t(){if(!e){e=!0;var t=document.createElement("script");t.src="https://widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js",t.async=!0,t.onload=function(){function e(){if(window.Trustpilot)for(var e=document.querySelectorAll(".trustpilot-widget"),t=0;t<e.length;t++)window.Trustpilot.loadFromElement(e[t],!0)}e(),setTimeout(e,500),setTimeout(e,1500),setTimeout(e,3e3)},t.onerror=function(){setTimeout(function(){var e=document.createElement("script");e.src="https://widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js",e.async=!0,e.onload=t.onload,document.body.appendChild(e)},2e3)},document.body.appendChild(t)}}var n=document.querySelector(".trustpilot-widget")||document.querySelector(".testimonials-section");if(n){var o=new IntersectionObserver(function(n){n[0].isIntersecting&&!e&&(o.disconnect(),t())},{rootMargin:"600px"});o.observe(n),setTimeout(function(){e||(o.disconnect(),t())},4e3)}}(),function(){const e=document.referrer;if(!e)return;const t=["chat.openai.com","chatgpt.com","perplexity.ai","claude.ai","anthropic.com","bing.com/chat","copilot.microsoft.com","you.com","phind.com","gemini.google.com","bard.google.com"].find(t=>e.includes(t));t&&("function"==typeof window.gtag&&window.__gaConfigured?window.gtag("event","ai_referral",{event_category:"AI Traffic",event_label:t,non_interaction:!1}):window.__pendingAiReferral=t)}(),function(){const e=document.querySelectorAll(".custom-select-wrapper");e.length&&(e.forEach(t=>{const n=t.querySelector(".custom-select-trigger"),o=t.querySelector(".custom-select-text"),s=t.querySelectorAll(".custom-option"),r=t.querySelector('input[type="hidden"]');n&&o&&r&&(n.addEventListener("click",function(n){n.stopPropagation(),e.forEach(e=>{e!==t&&e.classList.remove("open")}),t.classList.toggle("open")}),s.forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();const a=this.getAttribute("data-value");o.textContent=this.textContent,n.classList.add("has-value"),s.forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),r.value=a,t.classList.remove("open");const i=t.closest(".form-group");i&&i.classList.remove("is-invalid"),r.dispatchEvent(new Event("input",{bubbles:!0}))})}))}),document.addEventListener("click",function(){e.forEach(e=>e.classList.remove("open"))}))}();